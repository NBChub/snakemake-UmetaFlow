include: "rules/common.smk"

rule all:
    input:
        expand("data/mzML/{samples}.mzML", samples=SAMPLES),
        expand("results/Interim/mzML/PCpeak_{samples}.mzML", samples=SAMPLES),
        expand("results/Interim/preprocessed/FFM_{samples}.featureXML", samples=SAMPLES),
        expand("results/Interim/preprocessed/MFD_{samples}.featureXML", samples=SAMPLES),
        expand("results/Interim/feature_tables/features_{samples}.csv", samples=SAMPLES),
        expand("results/Interim/mzML/PCfeature_{samples}.mzML", samples=SAMPLES),
        expand(["results/Interim/preprocessed/MapAlignerPoseClustering_{samples}.featureXML", "results/Interim/preprocessed/MapAlignerPoseClustering_{samples}.trafoXML"], samples=SAMPLES),
        expand("results/Interim/preprocessed/IDMapper_{samples}.featureXML", samples=SAMPLES),
        expand("results/Interim/preprocessed/FeatureLinkerUnlabeledKD.consensusXML"),
        expand("results/Interim/preprocessed/FeatureQuantificationTable.txt"),
        expand("results/Preprocessed/FeatureQuantificationTable.csv"),
        expand("results/Interim/sirius/FFM_nch_{samples}.featureXML", samples=SAMPLES),
        expand("results/Interim/sirius/MFD_nch_{samples}.featureXML", samples=SAMPLES),
        expand("results/Interim/sirius/PCfeature_nch_{samples}.mzML", samples=SAMPLES),
        expand(["results/Interim/sirius/formulas_{samples}.mzTab", "results/Interim/sirius/structures_{samples}.mzTab"], samples=SAMPLES),
        expand(["results/SIRIUS/formulas_{samples}.csv", "results/CSI/structures_{samples}.csv"], samples=SAMPLES),
        expand("results/GNPSexport/{samples}.mzML", samples=SAMPLES),
        expand("results/Interim/GNPSexport/filtered.consensusXML"),
        expand("results/GNPSexport/MSMS.mgf"),
        expand("results/GNPSexport/FeatureQuantificationTable.txt"),
        expand("results/Interim/Requantified/consensus.csv"),
        expand("results/Interim/Requantified/MetaboliteIdentification.tsv"),
        expand("results/Interim/Requantified/Aligned_{samples}.mzML", samples=SAMPLES),
        expand("results/Interim/Requantified/FFMID_{samples}.featureXML", samples=SAMPLES),
        expand("results/Interim/Requantified/Requantified.consensusXML"),
        expand("results/Interim/Requantified/consensus.tsv"),
        expand("results/Requantified/FeatureMatrix.tsv"),
        expand("results/SIRIUS/SIRIUS_library.csv"),
        expand("results/CSI/CSI_library.csv"),
        expand("results/annotations/SIRIUS_CSI_annotated_FeatureTable.csv"),
        expand("results/annotations/GNPS_annotated_FeatureTable.csv")


include: "rules/fileconversion.smk",
include: "rules/preprocessing.smk",
include: "rules/GNPSexport.smk",
include: "rules/requantification.smk",
include: "rules/sirius.smk",
include: "rules/annotate.smk"